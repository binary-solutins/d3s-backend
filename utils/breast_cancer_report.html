<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breast Screening Report</title>
    <style>
        @page {
            size: A4;
            margin: 0;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            line-height: 1.4;
            width: 100%;
            min-height: 100vh;
            position: relative;
            padding-bottom: 60px; /* Space for footer */
            box-sizing: border-box;
        }
        .container {
            width: 100%;
            max-width: 794px; /* A4 width in pixels */
            margin: 0 auto;
            padding: 20px;
            box-sizing: border-box;
        }
        .header {
            display: table;
            width: 100%;
            margin-bottom: 20px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            table-layout: fixed;
        }
        .header-cell {
            display: table-cell;
            vertical-align: middle;
        }
        .logo {
            width: 100px;
        }
        .logo img {
            max-width: 100%;
            height: auto;
        }
        .report-title {
            text-align: center;
        }
        .report-title h2 {
            margin: 0;
            font-size: 18px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .report-title p {
            margin: 5px 0 0 0;
            font-size: 12px;
        }
        .hospital-logo {
            width: 40px;
            height: 40px;
            float: right;
        }
        .info-section {
            display: table;
            width: 100%;
            margin-bottom: 20px;
            table-layout: fixed;
        }
        .info-box {
            display: table-cell;
            width: 80%;
            border-radius: 5px;
            background-color: #FFF0F5;
            overflow: hidden;
        }
        .info-box:last-child {
            padding-right: 0;
            padding-left: 10px;
        }
        .info-box h3 {
            margin: 10px;
            padding: 5px 10px;
            text-align: center;
            background-color: #777; /* Changed to gray */
            color: white;
            font-size: 12px;
            width: fit-content;
            border-radius: 5px;
            text-align: center;
        }
        .info-content {
            padding: 15px;
            font-size: 12px;
        }
        .info-row {
            clear: both;
            margin-bottom: 10px;
            overflow: hidden;
        }
        .info-label {
            float: left;
            width: 120px; /* Increased width to fit longer labels */
            color: #666;
            font-weight: bold;
        }
        .info-value {
            margin-left: 120px;
            color: #000; /* Made values black */
        }
        .screening-section {
            margin-bottom: 20px;
            clear: both;
        }
        .screening-header {
            margin-bottom: 10px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #FFB6C1; /* Pink border */
            border-radius: 5px;
            padding: 5px;
        }
        .breast-image-icon {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            /* Will be replaced with an actual image */
        }
        .screening-title {
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            color: #000; /* Black text */
        }
        .images-grid {
            display: table;
            width: 100%;
            margin-bottom: 15px;
            table-layout: fixed;
        }
        .image-column {
            display: table-cell;
            width: 33.33%;
            text-align: center;
            padding: 0 7px;
        }
        .image-column:first-child {
            padding-left: 0;
        }
        .image-column:last-child {
            padding-right: 0;
        }
        .image-column h4 {
            margin: 0 0 5px 0;
            font-size: 12px;
            font-weight: bold;
            text-align: center; /* Centered text */
        }
        .breast-image {
            width: 130px;
            height: 130px;
            object-fit: cover;
            border: 1px solid #ccc;
        }
        .breast-image-placeholder {
            width: 130px;
            height: 130px;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            display: inline-block;
        }
        .remarks {
            margin-bottom: 20px;
            clear: both;
        }
        .remarks p {
            font-size: 10px;
            margin: 0 0 5px 0;
        }
        .remarks-line {
            border-bottom: 1px solid #ccc;
            height: 20px;
            margin-bottom: 10px;
        }
        .footer {
            font-size: 8px;
            padding: 10px;
            border-top: 1px solid #ccc;
            display: table;
            width: 100%;
            table-layout: fixed;
            background-color: #FFF0F5;
            position: absolute;
            bottom: 0;
            left: 0;
        }
        .disclaimer {
            display: table-cell;
            vertical-align: middle;
            width: 75%;
            padding-right: 10px;
        }
        .disclaimer-title {
            color: #800000;
            font-weight: bold;
        }
        .powered-by {
            display: table-cell;
            vertical-align: middle;
            width: 25%;
            text-align: right;
        }
        .powered-by span {
            margin-right: 5px;
        }
        .powered-by img {
            height: 20px;
            vertical-align: middle;
        }
        
        /* Add print-specific CSS */
        @media print {
            .container {
                width: 100% !important;
                max-width: none !important;
            }
            
            .header, .info-section, .images-grid, .footer {
                page-break-inside: avoid;
            }
            
            body {
                padding-bottom: 60px; /* Space for footer */
            }
            
            .footer {
                position: fixed;
                bottom: 0;
                left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-cell" style="width: 20%;">
                <div class="logo">
                    {{#if brScanLogo}}
                        <img src="{{brScanLogo}}" alt="BR-Scan Logo">
                    {{else}}
                        <h2>BR - <span style="color:#ff6699">Scan</span></h2>
                    {{/if}}
                </div>
            </div>
            <div class="header-cell" style="width: 60%;">
                <div class="report-title">
                    <h2>{{title}}</h2>
                    <p>Date: {{date}}</p>
                </div>
            </div>
            <div class="header-cell" style="width: 20%; text-align: right;">
                {{#if hospitalLogo}}
                    <img src="{{hospitalLogo}}" alt="Hospital Logo" class="hospital-logo">
                {{/if}}
            </div>
        </div>

        <div class="info-section">
            <div class="info-box">
                <h3>Subject Details</h3>
                <div class="info-content">
                    <div class="info-row">
                        <div class="info-label">Name:</div>
                        <div class="info-value">{{patient.dataValues.firstName}} {{patient.dataValues.lastName}}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Address:</div>
                        <div class="info-value">{{patient.dataValues.address}}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Contact:</div>
                        <div class="info-value">{{patient.dataValues.contact}}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Gender:</div>
                        <div class="info-value">{{patient.dataValues.gender}}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Age:</div>
                        <div class="info-value">{{patient.dataValues.age}} Years</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Weight:</div>
                        <div class="info-value">{{patient.dataValues.weight}} kg</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Height:</div>
                        <div class="info-value">{{patient.dataValues.height}} cm</div>
                    </div>
                </div>
            </div>
            <div class="info-box">
                <h3>Examiner Details</h3>
                <div class="info-content">
                    <div class="info-row">
                        <div class="info-label">Hospital Name:</div>
                        <div class="info-value">{{hospital.dataValues.name}}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Hospital Address:</div>
                        <div class="info-value">{{hospital.dataValues.address}}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Doctor Name:</div>
                        <div class="info-value">{{doctor.dataValues.name}}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Designation:</div>
                        <div class="info-value">{{doctor.dataValues.specialization}}</div>
                    </div>
                    <div class="info-row">
                        <div class="info-label">Screening Place:</div>
                        <div class="info-value">{{hospital.dataValues.name}}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="screening-section">
            <div class="screening-header">
                <!-- Replaced icon with image placeholder - you can replace this with your image -->
                <img src="{{breastIcon}}" alt="Breast Icon" class="breast-image-icon">
                <div class="screening-title">LEFT BREAST SCREENING VISUALS</div>
            </div>
            <div class="images-grid">
                <div class="image-column">
                    <h4>I. Top Side Image</h4>
                    {{#if leftTopImage}}
                        <img src="{{leftTopImage}}" alt="Left Breast Top View" class="breast-image">
                    {{else}}
                        <div class="breast-image-placeholder"></div>
                    {{/if}}
                </div>
                <div class="image-column">
                    <h4>II. Left Side Image</h4>
                    {{#if leftCenterImage}}
                        <img src="{{leftCenterImage}}" alt="Left Breast Left View" class="breast-image">
                    {{else}}
                        <div class="breast-image-placeholder"></div>
                    {{/if}}
                </div>
                <div class="image-column">
                    <h4>III. Right Side Image</h4>
                    {{#if leftBottomImage}}
                        <img src="{{leftBottomImage}}" alt="Left Breast Right View" class="breast-image">
                    {{else}}
                        <div class="breast-image-placeholder"></div>
                    {{/if}}
                </div>
            </div>
        </div>

        <div class="screening-section">
            <div class="screening-header">
                <!-- Replaced icon with image placeholder - you can replace this with your image -->
                <img src="{{breastIcon}}" alt="Breast Icon" class="breast-image-icon">
                <div class="screening-title">RIGHT BREAST SCREENING VISUALS</div>
            </div>
            <div class="images-grid">
                <div class="image-column">
                    <h4>I. Top Side Image</h4>
                    {{#if rightTopImage}}
                        <img src="{{rightTopImage}}" alt="Right Breast Top View" class="breast-image">
                    {{else}}
                        <div class="breast-image-placeholder"></div>
                    {{/if}}
                </div>
                <div class="image-column">
                    <h4>II. Center Side Image</h4>
                    {{#if rightCenterImage}}
                        <img src="{{rightCenterImage}}" alt="Right Breast Center View" class="breast-image">
                    {{else}}
                        <div class="breast-image-placeholder"></div>
                    {{/if}}
                </div>
                <div class="image-column">
                    <h4>III. Bottom Side Image</h4>
                    {{#if rightBottomImage}}
                        <img src="{{rightBottomImage}}" alt="Right Breast Bottom View" class="breast-image">
                    {{else}}
                        <div class="breast-image-placeholder"></div>
                    {{/if}}
                </div>
            </div>
        </div>

        <div class="remarks">
            <p>Remarks:</p>
            <div class="remarks-line"></div>
            <div class="remarks-line"></div>
        </div>
    </div>
    
    <div class="footer">
        <div class="disclaimer">
            <span class="disclaimer-title">Disclaimer:</span> The Breast screening report we provide is based on what we can see in the images. It
            might change once the screening is done at the hospital itself. The staff will help with the future
            steps; diagnostic treatments. Please talk to your doctor, gynecologist, oncologist, or surgeon.
        </div>
        <div class="powered-by">
            <span>Powered by:</span>
            {{#if awsLogo}}
                <img src="https://www.logo.wine/a/logo/Microsoft_Azure/Microsoft_Azure-Logo.wine.svg" alt="AWS">
            {{/if}}
        </div>
    </div>
</body>
</html>